### C

每次取最大最小值的平均值操作即可，暴力更新 40 次，最后仍存在不为 0 的数则不合法，否则输出即可



---

## D

注意到质数除了 2 之外都是奇数，所以只有偶数和奇数异或才可能得到素数 (2除外)，由于 4色定理，四个颜色一定可以使得一个图中任意两个相邻的区域颜色不相同，考虑将就分成两个部分考虑，每个分给两个颜色，这样奇偶之间就算异或值为素数存在边，最终这条边的两个顶点之间也一定不会颜色相同，现在需要考虑奇、偶内部，当两个数异或为 2 时，考虑将该颜色修改为另一个颜色即可

对于 n < 6，最小化颜色的数量需要特判 {1,2,2,3,3} 按顺序输出即可。